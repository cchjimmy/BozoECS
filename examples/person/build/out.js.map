{
  "version": 3,
  "sources": ["../../../src/pool.ts", "../../../src/component.ts", "../../../src/entity.ts", "../../../src/world.ts", "../src/main.ts"],
  "sourcesContent": ["export class ObjectPoolMap<K, V> {\n  private storage: V[] = [];\n  private keyToIndex: Map<K, number> = new Map();\n  private indexToKey: K[] = [];\n  private objectFactory: () => V;\n\n  constructor(objectFactory: () => V) {\n    this.objectFactory = objectFactory;\n  }\n\n  size() {\n    return this.indexToKey.length;\n  }\n\n  add(key: K): V {\n    if (!this.keyToIndex.has(key)) {\n      if (this.storage.length <= this.indexToKey.length) {\n        this.storage.push(this.objectFactory());\n      }\n      this.keyToIndex.set(key, this.indexToKey.length);\n      this.indexToKey[this.indexToKey.length] = key;\n    }\n    return this.storage[this.keyToIndex.get(key) as number];\n  }\n\n  remove(key: K): void {\n    const index = this.keyToIndex.get(key);\n    if (index == undefined) return;\n    const backKey = this.indexToKey[this.indexToKey.length - 1];\n    const temp = this.storage[this.indexToKey.length - 1];\n    this.storage[this.indexToKey.length - 1] = this.storage[index];\n    this.storage[index] = temp;\n    this.indexToKey[index] = backKey;\n    this.keyToIndex.set(backKey, index);\n    this.indexToKey.pop();\n    this.keyToIndex.delete(key);\n  }\n\n  get(key: K): V {\n    const index = this.keyToIndex.get(key);\n    if (index == undefined) throw new Error(\"Key not found\");\n    return this.storage[index];\n  }\n\n  has(key: K): boolean {\n    return this.keyToIndex.has(key);\n  }\n\n  clean() {\n    this.storage.splice(this.indexToKey.length);\n  }\n}\n", "import { ObjectPoolMap } from \"./pool.ts\";\nimport { entityT } from \"./entity.ts\";\n\nexport class ComponentManager {\n  private pools: Map<object, ObjectPoolMap<entityT, object>> = new Map();\n  private idMap: Map<object, number> = new Map();\n\n  register<T extends object>(component: T): void {\n    if (this.pools.has(component)) return;\n    this.idMap.set(component, this.idMap.size);\n    this.pools.set(\n      component,\n      new ObjectPoolMap<entityT, T>(() => ({ ...component })),\n    );\n  }\n\n  getId<T extends object>(component: T): number {\n    return this.idMap.get(component) ?? -1;\n  }\n\n  add<T extends object>(entity: entityT, component: T): T {\n    return Object.assign(\n      (this.pools.get(component) as ObjectPoolMap<entityT, T>).add(entity),\n      component,\n    );\n  }\n\n  remove<T extends object>(entity: entityT, component: T): void {\n    (this.pools.get(component) as ObjectPoolMap<entityT, T>).remove(entity);\n  }\n\n  has<T extends object>(entity: entityT, component: T): boolean {\n    return (this.pools.get(component) as ObjectPoolMap<entityT, T>).has(entity);\n  }\n\n  get<T extends object>(entity: entityT, component: T): T {\n    return (this.pools.get(component) as ObjectPoolMap<entityT, T>).get(entity);\n  }\n\n  size<T extends object>(component: T): number {\n    return (this.pools.get(component) as ObjectPoolMap<entityT, T>).size();\n  }\n\n  delete(entity: entityT): void {\n    for (const entry of this.pools) {\n      entry[1].remove(entity);\n    }\n  }\n\n  copy(src: entityT, dest: entityT): void {\n    for (const entry of this.pools) {\n      entry[1].has(src) && Object.assign(entry[1].add(dest), entry[1].get(src));\n    }\n  }\n\n  clean() {\n    for (const entry of this.pools) {\n      entry[1].clean();\n    }\n  }\n}\n", "export type entityT = number;\nexport function newEntity(): entityT {\n  return Math.random();\n}\n", "import { ComponentManager } from \"./component.ts\";\nimport { newEntity, type entityT } from \"./entity.ts\";\n\nexport type queryT = Partial<Record<\"and\" | \"not\", object[]>>;\n\nexport class World {\n  private maskMap: Map<number, number> = new Map();\n  private archetypeMap: Map<number, Set<entityT>> = new Map();\n  private compManager = new ComponentManager();\n\n  addEntity(entity: entityT = newEntity()): entityT {\n    this.maskMap.set(entity, 0);\n    this.getArchetype(0).add(entity);\n    return entity;\n  }\n\n  copyEntity(src: entityT, dest: entityT = newEntity()): entityT {\n    this.compManager.copy(src, dest);\n    const mask = this.maskMap.get(src) ?? 0;\n    this.maskMap.set(dest, mask);\n    this.getArchetype(mask).add(dest);\n    return dest;\n  }\n\n  private getArchetype(mask: number): Set<entityT> {\n    const a = this.archetypeMap.get(mask) ?? new Set();\n    this.archetypeMap.set(mask, a);\n    return a;\n  }\n\n  deleteEntity(entity: entityT) {\n    this.compManager.delete(entity);\n    const mask = this.maskMap.get(entity) ?? 0;\n    this.maskMap.delete(entity);\n    this.getArchetype(mask).delete(entity);\n  }\n\n  registerComponent<T extends object>(component: T): World {\n    this.compManager.register(component);\n    return this;\n  }\n\n  hasComponent<T extends object>(entity: entityT, component: T): boolean {\n    return this.compManager.has(entity, component);\n  }\n\n  addComponent<T extends object>(\n    entity: entityT,\n    component: T,\n    values: Partial<T> = component,\n  ): T {\n    this.registerComponent(component);\n    let mask = this.maskMap.get(entity) ?? 0;\n    const compId = this.compManager.getId(component);\n    if (mask & (1 << compId))\n      return Object.assign(this.compManager.get(entity, component), values);\n    this.getArchetype(mask).delete(entity);\n    mask |= 1 << compId;\n    this.maskMap.set(entity, mask);\n    this.getArchetype(mask).add(entity);\n    return Object.assign(this.compManager.add(entity, component), values);\n  }\n\n  removeComponent<T extends object>(entity: entityT, component: T): void {\n    this.registerComponent(component);\n    let mask = this.maskMap.get(entity) ?? 0;\n    const compId = this.compManager.getId(component);\n    if ((mask & (1 << compId)) == 0) return;\n    this.getArchetype(mask).delete(entity);\n    mask ^= 1 << compId;\n    this.maskMap.set(entity, mask);\n    this.getArchetype(mask).add(entity);\n    this.compManager.remove(entity, component);\n  }\n\n  getComponent<T extends object>(entity: entityT, component: T): T {\n    return this.compManager.get(entity, component);\n  }\n\n  update(...fns: ((world: World) => void)[]) {\n    for (let i = 0, l = fns.length; i < l; i++) fns[i](this);\n  }\n\n  cleanObjectPools() {\n    this.compManager.clean();\n  }\n\n  query(query: queryT): entityT[] {\n    let andMask = 0,\n      notMask = 0;\n    if (query.and) {\n      for (let i = 0, l = query.and.length; i < l; i++) {\n        andMask |= 1 << this.compManager.getId(query.and[i]);\n      }\n    }\n    if (query.not) {\n      for (let i = 0, l = query.not.length; i < l; i++) {\n        notMask |= 1 << this.compManager.getId(query.not[i]);\n      }\n    }\n    const res: entityT[] = [];\n    for (const entry of this.archetypeMap) {\n      entry[1].size > 0 &&\n        (entry[0] & andMask) == andMask &&\n        (entry[0] & notMask) == 0 &&\n        res.push(...entry[1]);\n    }\n    return res;\n  }\n\n  entityCount(): number {\n    return this.maskMap.size;\n  }\n}\n", "import { entityT, World } from \"bozoecs\";\n\n// singletons\nconst Ctx2D = setUpCanvas2D();\nconst Time = setUpTime();\nconst Pointer = setUpPointer();\n\nfunction setUpCanvas2D() {\n  const canvas =\n    document.querySelector(\"canvas\") ?? document.createElement(\"canvas\");\n  if (!canvas) throw new Error(\"Cannot create canvas element.\");\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new Error(\"Cannot initialize context 2d.\");\n\n  document.body.appendChild(canvas);\n\n  globalThis.onresize = globalThis.onload = () => {\n    if (innerWidth / innerHeight < canvas.width / canvas.height) {\n      canvas.style.width = \"100%\";\n      canvas.style.height = \"\";\n    } else {\n      canvas.style.width = \"\";\n      canvas.style.height = \"100%\";\n    }\n  };\n\n  return { canvas, ctx };\n}\nfunction setUpTime() {\n  return { dtMilli: 0, timeMilli: 0 };\n}\nfunction updateTime(time: { dtMilli: number; timeMilli: number }) {\n  time.dtMilli = performance.now() - time.timeMilli;\n  time.timeMilli += time.dtMilli;\n}\ntype pointerT = {\n  pos: Map<number, vec2>;\n  isDown: Map<number, boolean>;\n  justPressed: Map<number, boolean>;\n  justReleased: Map<number, boolean>;\n  pressPos: Map<number, vec2>;\n  releasePos: Map<number, vec2>;\n};\nfunction setUpPointer() {\n  const pointer: pointerT = {\n    pos: new Map(),\n    isDown: new Map(),\n    justPressed: new Map(),\n    justReleased: new Map(),\n    pressPos: new Map(),\n    releasePos: new Map(),\n  };\n\n  globalThis.onpointerdown = (e) => {\n    if (!(e.target instanceof HTMLCanvasElement)) return;\n    pointer.pos.set(e.pointerId, { x: e.x, y: e.y });\n    pointer.pressPos.set(e.pointerId, { x: e.x, y: e.y });\n    pointer.isDown.set(e.pointerId, true);\n    pointer.justPressed.set(e.pointerId, true);\n  };\n\n  globalThis.onpointerup = (e) => {\n    pointer.pos.delete(e.pointerId);\n    pointer.releasePos.set(e.pointerId, { x: e.x, y: e.y });\n    pointer.isDown.delete(e.pointerId);\n    pointer.justReleased.set(e.pointerId, true);\n  };\n\n  globalThis.onpointermove = (e) => {\n    pointer.pos.set(e.pointerId, { x: e.x, y: e.y });\n  };\n\n  return pointer;\n}\nfunction updatePointer(pointer: pointerT) {\n  pointer.justReleased.clear();\n  pointer.justPressed.clear();\n  pointer.releasePos.clear();\n  pointer.pressPos.clear();\n}\n\n// components\nconst Transform = { x: 0, y: 0, rad: 0 };\nconst Hierarchy = { parent: -1 };\nconst Eye = { eyeWhiteRadius: 1, pupilRadius: 0.4, lookAtEntity: -1 };\nconst Camera = { zoom: 20, tilt: 0, isActive: false };\nconst Rect = { width: 1, height: 1 };\nconst Material = { density: 0.1 };\nconst Velocity = { x: 0, y: 0 };\nconst Acceleration = { x: 0, y: 0 };\nconst isPointer = {};\n\n// entities\nfunction addLimb(\n  world: World,\n  x = 0,\n  y = 0,\n  rect: typeof Rect = { width: 1, height: 1 },\n  offset: vec2 = { x: 0, y: 0 },\n  parent = -1,\n) {\n  const anchor = world.addEntity();\n  world.addComponent(anchor, Transform, { x, y });\n  world.addComponent(anchor, Hierarchy, { parent });\n  const limb = world.addEntity();\n  world.addComponent(limb, Transform, offset);\n  world.addComponent(limb, Hierarchy, { parent: anchor });\n  world.addComponent(limb, Rect, rect);\n  world.addComponent(limb, Material);\n  world.addComponent(limb, Velocity);\n  world.addComponent(limb, Acceleration);\n  return anchor;\n}\nfunction addEye(\n  world: World,\n  x = 0,\n  y = 0,\n  eyeWhiteRadius = 1,\n  pupilRadius = 0.4,\n  lookAtEntity = -1,\n  parent = -1,\n) {\n  const eye = world.addEntity();\n  world.addComponent(eye, Transform, { x, y });\n  world.addComponent(eye, Hierarchy, { parent });\n  world.addComponent(eye, Eye, { eyeWhiteRadius, pupilRadius, lookAtEntity });\n  return eye;\n}\nfunction addPerson(world: World, x = 0, y = 0, lookAtEntity = -1) {\n  const headRect: typeof Rect = { width: 1, height: 1 };\n  const headOffset: vec2 = { x: -0.5, y: 0 };\n  const torsoRect: typeof Rect = { width: 1, height: 2 };\n  const torsoOffset: vec2 = { x: -0.5, y: -2 };\n  const limbRect: typeof Rect = { width: 0.5, height: 0.9 };\n  const limbOffset: vec2 = { x: -0.25, y: -0.9 };\n\n  const torso = addLimb(world, x, y, torsoRect, torsoOffset);\n  const head = addLimb(world, 0, 0.2, headRect, headOffset, torso);\n  const leftEye = addEye(world, 0.4, 0.4, 0.3, 0.1, lookAtEntity, head);\n  const rightEye = addEye(world, -0.4, 0.4, 0.3, 0.1, lookAtEntity, head);\n  const leftUpperArm = addLimb(world, 1, 0, limbRect, limbOffset, torso);\n  const leftLowerArm = addLimb(\n    world,\n    0,\n    -1,\n    limbRect,\n    limbOffset,\n    leftUpperArm,\n  );\n  const rightUpperArm = addLimb(world, -1, 0, limbRect, limbOffset, torso);\n  const rightLowerArm = addLimb(\n    world,\n    0,\n    -1,\n    limbRect,\n    limbOffset,\n    rightUpperArm,\n  );\n  const leftUpperLeg = addLimb(world, 0.5, -2.2, limbRect, limbOffset, torso);\n  const leftLowerLeg = addLimb(\n    world,\n    0,\n    -1,\n    limbRect,\n    limbOffset,\n    leftUpperLeg,\n  );\n  const rightUpperLeg = addLimb(world, -0.5, -2.2, limbRect, limbOffset, torso);\n  const rightLowerLeg = addLimb(\n    world,\n    0,\n    -1,\n    limbRect,\n    limbOffset,\n    rightUpperLeg,\n  );\n  return torso;\n}\n\n// systems\nfunction handleDrawRects(world: World) {\n  Ctx2D.ctx.beginPath();\n  world.query({ and: [Transform, Rect] }).forEach((e) => {\n    const { x, y, rad: r } = calculateHierarchyTransform(world, e);\n    const rect = world.getComponent(e, Rect);\n    const c = Math.cos(r);\n    const s = Math.sin(r);\n    Ctx2D.ctx.transform(c, s, -s, c, x, y);\n    Ctx2D.ctx.rect(0, 0, rect.width, rect.height);\n    Ctx2D.ctx.transform(c, -s, s, c, c * -x + s * -y, -s * -x + c * -y);\n  });\n  Ctx2D.ctx.fillStyle = \"white\";\n  Ctx2D.ctx.fill();\n}\nfunction handleDrawEyes(world: World) {\n  world.query({ and: [Transform, Eye, Hierarchy] }).forEach((e) => {\n    const eye = world.getComponent(e, Eye);\n    const { x, y } = calculateHierarchyTransform(world, e);\n    Ctx2D.ctx.fillStyle = \"lightgrey\";\n    Ctx2D.ctx.beginPath();\n    Ctx2D.ctx.ellipse(\n      x,\n      y,\n      eye.eyeWhiteRadius,\n      eye.eyeWhiteRadius,\n      0,\n      0,\n      Math.PI * 2,\n    );\n    Ctx2D.ctx.fill();\n    let dirX = 0;\n    let dirY = 0;\n    let mag = eye.eyeWhiteRadius - eye.pupilRadius;\n    if (eye.lookAtEntity != -1) {\n      const t = world.getComponent(eye.lookAtEntity, Transform);\n      dirX = t.x - x;\n      dirY = t.y - y;\n      const m = (dirX ** 2 + dirY ** 2) ** 0.5;\n      dirX /= m;\n      dirY /= m;\n      mag = Math.min(m, mag);\n    }\n    Ctx2D.ctx.fillStyle = \"black\";\n    Ctx2D.ctx.beginPath();\n    Ctx2D.ctx.ellipse(\n      x + dirX * mag,\n      y + dirY * mag,\n      eye.pupilRadius,\n      eye.pupilRadius,\n      0,\n      0,\n      Math.PI * 2,\n    );\n    Ctx2D.ctx.fill();\n  });\n}\nfunction handleCamera(world: World) {\n  const camEntity = world\n    .query({ and: [Camera, Transform] })\n    .find((e) => world.getComponent(e, Camera).isActive);\n  if (!camEntity) return;\n  Ctx2D.ctx.resetTransform();\n  const c = world.getComponent(camEntity, Camera);\n  const p = world.getComponent(camEntity, Transform);\n  if (world.hasComponent(camEntity, Hierarchy)) {\n    const h = world.getComponent(camEntity, Hierarchy);\n    if (world.hasComponent(h.parent, Transform)) {\n      Object.assign(p, world.getComponent(h.parent, Transform));\n    }\n  }\n  const sin = Math.sin(p.rad + c.tilt);\n  const cos = Math.cos(p.rad + c.tilt);\n  const x = p.x * c.zoom;\n  const y = p.y * -c.zoom;\n  Ctx2D.ctx.transform(\n    cos,\n    sin,\n    -sin,\n    cos,\n    cos * -x - sin * -y + Ctx2D.canvas.width * 0.5,\n    sin * -x + cos * -y + Ctx2D.canvas.height * 0.5,\n  );\n  Ctx2D.ctx.transform(c.zoom, 0, 0, -c.zoom, 0, 0);\n}\nfunction handleGravity(world: World) {\n  world\n    .query({ and: [Rect, Material, Acceleration, Hierarchy] })\n    .forEach((e) => {\n      const r = world.getComponent(e, Rect);\n      const m = world.getComponent(e, Material);\n      const a = world.getComponent(e, Acceleration);\n      const h = world.getComponent(e, Hierarchy);\n      const mass = r.width * r.height * m.density;\n      if (h.parent != -1) return;\n      a.y = -9.81;\n    });\n}\nfunction handleMovement(world: World) {\n  world.query({ and: [Velocity, Acceleration] }).forEach((e) => {\n    const v = world.getComponent(e, Velocity);\n    const a = world.getComponent(e, Acceleration);\n    v.x += (a.x * Time.dtMilli) / 1000;\n    v.y += (a.y * Time.dtMilli) / 1000;\n  });\n  world.query({ and: [Transform, Velocity] }).forEach((e) => {\n    const t = world.getComponent(e, Transform);\n    const v = world.getComponent(e, Velocity);\n    t.x += (v.x * Time.dtMilli) / 1000;\n    t.y += (v.y * Time.dtMilli) / 1000;\n  });\n}\nfunction handlePointer(world: World) {\n  world.query({ and: [isPointer] }).forEach((e) => world.deleteEntity(e));\n  const cam = world\n    .query({ and: [Camera, Transform] })\n    .find((e) => world.getComponent(e, Camera).isActive);\n  if (!cam) return;\n  const camComp = world.getComponent(cam, Camera);\n  const camPos = world.getComponent(cam, Transform);\n  Pointer.isDown.forEach((_, k) => {\n    const pointerEntity = world.addEntity();\n    const pos = Pointer.pos.get(k);\n    if (!pos) return;\n    world.addComponent(\n      pointerEntity,\n      Transform,\n      screenToWorld(\n        pointerToScreen(pos, Ctx2D.canvas, true),\n        camPos,\n        camComp.tilt,\n        camComp.zoom,\n      ),\n    );\n    world.addComponent(pointerEntity, isPointer);\n    world.addComponent(pointerEntity, Rect);\n  });\n}\nfunction handleLookAtPointer(world: World) {\n  world.query({ and: [Eye, Transform] }).forEach((e) => {\n    const eye = world.getComponent(e, Eye);\n    const { x, y } = calculateHierarchyTransform(world, e);\n    let pointerRect = -1;\n    let minDistance = Number.POSITIVE_INFINITY;\n    world.query({ and: [isPointer, Transform] }).forEach((e) => {\n      const t = world.getComponent(e, Transform);\n      const dx = t.x - x;\n      const dy = t.y - y;\n      const distance = (dx ** 2 + dy ** 2) ** 0.5;\n      if (distance > minDistance) return;\n      minDistance = distance;\n      pointerRect = e;\n    });\n    eye.lookAtEntity = pointerRect ?? -1;\n  });\n}\n\n// utils\nfunction drawBackground(color = \"#202020\") {\n  Ctx2D.ctx.resetTransform();\n  Ctx2D.ctx.fillStyle = color;\n  Ctx2D.ctx.fillRect(0, 0, Ctx2D.canvas.width, Ctx2D.canvas.height);\n}\ntype vec2 = { x: number; y: number };\nfunction screenToWorld(\n  screenPos: vec2,\n  cameraPos: vec2,\n  cameraTilt: number,\n  cameraZoom: number,\n): vec2 {\n  const cos = Math.cos(cameraTilt);\n  const sin = Math.sin(cameraTilt);\n  const res = { x: 0, y: 0 };\n  const x = screenPos.x - Ctx2D.canvas.width / 2;\n  const y = screenPos.y - Ctx2D.canvas.height / 2;\n  res.x = cos * x - sin * y;\n  res.y = sin * x + cos * y;\n  res.x /= cameraZoom;\n  res.y /= cameraZoom;\n  res.x += cameraPos.x;\n  res.y += cameraPos.y;\n  return res;\n}\nfunction pointerToScreen(\n  pointerPos: vec2,\n  canvas: HTMLCanvasElement,\n  invertY: boolean = false,\n): vec2 {\n  const out = { x: 0, y: 0 };\n  const rect = canvas.getBoundingClientRect();\n  out.x = pointerPos.x - rect.left;\n  out.y = pointerPos.y - rect.top;\n  if (innerWidth / innerHeight < canvas.width / canvas.height) {\n    out.x *= canvas.width / innerWidth;\n    out.y *= canvas.width / innerWidth;\n  } else {\n    out.x *= canvas.height / innerHeight;\n    out.y *= canvas.height / innerHeight;\n  }\n  if (invertY) out.y = -out.y + canvas.height;\n  return out;\n}\nfunction calculateHierarchyTransform(\n  world: World,\n  entity: entityT,\n): typeof Transform {\n  const t = world.getComponent(entity, Transform);\n  if (!world.hasComponent(entity, Hierarchy)) return t;\n  let x = t.x;\n  let y = t.y;\n  let r = t.rad;\n  let h = world.getComponent(entity, Hierarchy);\n  while (world.hasComponent(h.parent, Hierarchy)) {\n    if (world.hasComponent(h.parent, Transform)) {\n      const parentTransform = world.getComponent(h.parent, Transform);\n      const c = Math.cos(parentTransform.rad);\n      const s = Math.sin(parentTransform.rad);\n      const _x = x;\n      const _y = y;\n      x = c * _x - s * _y;\n      y = s * _x + c * _y;\n      x += parentTransform.x;\n      y += parentTransform.y;\n      r += parentTransform.rad;\n    }\n    h = world.getComponent(h.parent, Hierarchy);\n  }\n  return { x, y, rad: r };\n}\n\n// initialization\nconst game = new World();\n\nconst player = addPerson(game, 0, 0);\n// addPerson(game, -3, 1);\n// addPerson(game, 3, 0);\n\nconst camera = game.addEntity();\ngame.addComponent(camera, Transform, { x: 0, y: 0 });\ngame.addComponent(camera, Camera, {\n  zoom: 18,\n  isActive: true,\n});\ngame.addComponent(camera, Hierarchy, { parent: player });\n\n{\n  (function update() {\n    requestAnimationFrame(update);\n    drawBackground();\n    game.update(\n      handleCamera,\n      handlePointer,\n      handleLookAtPointer,\n      handleDrawRects,\n      handleDrawEyes,\n      handleGravity,\n      handleMovement,\n    );\n    updateTime(Time);\n    updatePointer(Pointer);\n  })();\n}\n"],
  "mappings": "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",
  "names": ["ObjectPoolMap", "objectFactory", "key", "index", "backKey", "temp", "ComponentManager", "component", "ObjectPoolMap", "entity", "entry", "src", "dest", "newEntity", "World", "ComponentManager", "entity", "newEntity", "src", "dest", "mask", "a", "component", "values", "compId", "fns", "i", "l", "query", "andMask", "notMask", "res", "entry", "Ctx2D", "setUpCanvas2D", "Time", "setUpTime", "Pointer", "setUpPointer", "canvas", "ctx", "updateTime", "time", "pointer", "e", "updatePointer", "Transform", "Hierarchy", "Eye", "Camera", "Rect", "Material", "Velocity", "Acceleration", "isPointer", "addLimb", "world", "x", "y", "rect", "offset", "parent", "anchor", "limb", "addEye", "eyeWhiteRadius", "pupilRadius", "lookAtEntity", "eye", "addPerson", "headRect", "headOffset", "torsoRect", "torsoOffset", "limbRect", "limbOffset", "torso", "head", "leftEye", "rightEye", "leftUpperArm", "leftLowerArm", "rightUpperArm", "rightLowerArm", "leftUpperLeg", "leftLowerLeg", "rightUpperLeg", "rightLowerLeg", "handleDrawRects", "r", "calculateHierarchyTransform", "c", "s", "handleDrawEyes", "dirX", "dirY", "mag", "t", "m", "handleCamera", "camEntity", "p", "sin", "cos", "handleGravity", "a", "h", "mass", "handleMovement", "v", "handlePointer", "cam", "camComp", "camPos", "_", "k", "pointerEntity", "pos", "screenToWorld", "pointerToScreen", "handleLookAtPointer", "pointerRect", "minDistance", "dx", "dy", "distance", "drawBackground", "color", "screenPos", "cameraPos", "cameraTilt", "cameraZoom", "res", "pointerPos", "invertY", "out", "entity", "parentTransform", "_x", "_y", "game", "World", "player", "camera", "update"]
}
