{
  "version": 3,
  "sources": ["../../../src/pool.ts", "../../../src/component.ts", "../../../src/entity.ts", "../../../src/world.ts", "../config.json", "../src/main.ts"],
  "sourcesContent": ["export class ObjectPoolMap<K, V> {\n  private storage: V[] = [];\n  private keyToIndex: Map<K, number> = new Map();\n  private indexToKey: K[] = [];\n  private objectFactory: () => V;\n\n  constructor(objectFactory: () => V) {\n    this.objectFactory = objectFactory;\n  }\n\n  size() {\n    return this.keyToIndex.size;\n  }\n\n  add(key: K): V {\n    if (this.keyToIndex.has(key))\n      return this.storage[this.keyToIndex.get(key) as number];\n    if (this.storage.length <= this.keyToIndex.size)\n      this.storage.push(this.objectFactory());\n    this.keyToIndex.set(key, this.keyToIndex.size);\n    this.indexToKey[this.keyToIndex.size - 1] = key;\n    return this.storage[this.keyToIndex.get(key) as number];\n  }\n\n  remove(key: K): void {\n    const index = this.keyToIndex.get(key);\n    if (index == undefined) return;\n    const backKey = this.indexToKey[this.keyToIndex.size - 1];\n    const temp = this.storage[index];\n    this.storage[index] = this.storage[this.keyToIndex.size - 1];\n    this.storage[this.keyToIndex.size - 1] = temp;\n    this.indexToKey[index] = backKey;\n    this.indexToKey.pop();\n    this.keyToIndex.set(backKey, index);\n    this.keyToIndex.delete(key);\n  }\n\n  get(key: K): V {\n    const index = this.keyToIndex.get(key);\n    if (index == undefined) throw new Error(\"Key not found.\");\n    return this.storage[index];\n  }\n\n  has(key: K): boolean {\n    return this.keyToIndex.has(key);\n  }\n\n  clean(): void {\n    this.storage.splice(this.keyToIndex.size);\n  }\n}\n", "import { ObjectPoolMap } from \"./pool.ts\";\nimport { entityT } from \"./entity.ts\";\n\nexport class ComponentManager {\n  private poolMap: Map<object, ObjectPoolMap<entityT, object>> = new Map();\n  private idMap: Map<object, number> = new Map();\n\n  register<T extends object>(component: T): void {\n    if (this.poolMap.has(component)) return;\n    this.idMap.set(component, this.idMap.size);\n    this.poolMap.set(\n      component,\n      new ObjectPoolMap<entityT, T>(() => ({ ...component })),\n    );\n  }\n\n  getId<T extends object>(component: T): number {\n    const mask = this.idMap.get(component);\n    if (mask != undefined) return mask;\n    this.register(component);\n    return this.idMap.get(component) as number;\n  }\n\n  add<T extends object>(entity: entityT, component: T): T {\n    return Object.assign(\n      (this.poolMap.get(component) as ObjectPoolMap<entityT, T>).add(entity),\n      component,\n    );\n  }\n\n  remove<T extends object>(entity: entityT, component: T): void {\n    (this.poolMap.get(component) as ObjectPoolMap<entityT, T>).remove(entity);\n  }\n\n  has<T extends object>(entity: entityT, component: T): boolean {\n    return (\n      this.poolMap.has(component) &&\n      (this.poolMap.get(component) as ObjectPoolMap<entityT, T>).has(entity)\n    );\n  }\n\n  get<T extends object>(entity: entityT, component: T): T {\n    return (this.poolMap.get(component) as ObjectPoolMap<entityT, T>).get(\n      entity,\n    );\n  }\n\n  size<T extends object>(component: T): number {\n    return (this.poolMap.get(component) as ObjectPoolMap<entityT, T>).size();\n  }\n\n  delete(entity: entityT): void {\n    for (const entry of this.poolMap.entries()) entry[1].remove(entity);\n  }\n\n  copy(src: entityT, dest: entityT): void {\n    for (const entry of this.poolMap.entries())\n      entry[1].has(src) && Object.assign(entry[1].add(dest), entry[1].get(src));\n  }\n\n  clean(): void {\n    for (const entry of this.poolMap.entries()) entry[1].clean();\n  }\n}\n", "export type entityT = number;\nexport function newEntity(): entityT {\n  return Math.random();\n}\n", "import { ComponentManager } from \"./component.ts\";\nimport { newEntity, type entityT } from \"./entity.ts\";\n\nexport type queryT = Record<\"and\" | \"not\", object[]>;\n\nexport type systemT = (world: World) => void;\n\nexport class World {\n  private compEntityMap: Map<number, Set<entityT>> = new Map();\n  private compManager = new ComponentManager();\n  private entitySet: Set<entityT> = new Set();\n\n  addEntity(entity: entityT = newEntity()): entityT {\n    this.entitySet.add(entity);\n    return entity;\n  }\n\n  copyEntity(src: entityT, dest: entityT = newEntity()): entityT {\n    this.compManager.copy(src, dest);\n    for (const entry of this.compEntityMap) {\n      if (!entry[1].has(src)) continue;\n      entry[1].add(dest);\n    }\n    this.entitySet.add(dest);\n    return dest;\n  }\n\n  private getCompEntityMap(compId: number): Set<entityT> {\n    const a = this.compEntityMap.get(compId) ?? new Set();\n    this.compEntityMap.set(compId, a);\n    return a;\n  }\n\n  deleteEntity(entity: entityT) {\n    this.compManager.delete(entity);\n    for (const entry of this.compEntityMap) {\n      entry[1].delete(entity);\n    }\n    this.entitySet.delete(entity);\n  }\n\n  registerComponent<T extends object>(component: T): World {\n    this.compManager.register(component);\n    return this;\n  }\n\n  hasComponent<T extends object>(entity: entityT, component: T): boolean {\n    return this.compManager.has(entity, component);\n  }\n\n  addComponent<T extends object>(\n    entity: entityT,\n    component: T,\n    values: Partial<T> = component,\n  ): T {\n    this.compManager.register(component);\n    const cem = this.getCompEntityMap(this.compManager.getId(component));\n    if (cem.has(entity))\n      return Object.assign(this.compManager.get(entity, component), values);\n    cem.add(entity);\n    return Object.assign(this.compManager.add(entity, component), values);\n  }\n\n  removeComponent<T extends object>(entity: entityT, component: T): void {\n    this.compManager.register(component);\n    const cem = this.getCompEntityMap(this.compManager.getId(component));\n    if (!cem.has(entity)) return;\n    cem.delete(entity);\n    this.compManager.remove(entity, component);\n  }\n\n  getComponent<T extends object>(entity: entityT, component: T): T {\n    return this.compManager.get(entity, component);\n  }\n\n  update(...fns: systemT[]) {\n    for (let i = 0, l = fns.length; i < l; i++) fns[i](this);\n  }\n\n  cleanObjectPools(): void {\n    this.compManager.clean();\n  }\n\n  query(query: Partial<queryT>): entityT[] {\n    let res: Set<entityT> = this.entitySet;\n    const q: queryT = { and: [], not: [] };\n    Object.assign(q, query);\n    for (const comp of q.and) {\n      res = res.intersection(\n        this.getCompEntityMap(this.compManager.getId(comp)),\n      );\n    }\n    for (const comp of q.not) {\n      res = res.difference(this.getCompEntityMap(this.compManager.getId(comp)));\n    }\n    return [...res];\n  }\n\n  entityCount(): number {\n    return this.entitySet.size;\n  }\n}\n", "{\n\t\"grav\": 981,\n\t\"hSpeedMult\": 1.001,\n\t\"pipe\": {\n\t\t\"gapHeight\": 80,\n\t\t\"baseSpeed\": 100,\n\t\t\"width\": 30,\n\t\t\"height\": 1000\n\t}\n}\n", "import { entityT, World } from \"bozoecs\";\nimport { default as config } from \"../config.json\" with { type: \"json\" };\n\n// singletons\nconst canvas = document.createElement(\"canvas\");\nif (!canvas) throw new Error(\"Cannot create canvas element.\");\ncanvas.style.imageRendering = \"pixelated\";\ndocument.body.appendChild(canvas);\nconst ctx = canvas.getContext(\"2d\");\nif (!ctx) throw new Error(\"Cannot initialize 2d context.\");\nconst Pointer = { isDown: false, justPressed: false, justReleased: false };\nconst Keys: Record<keyof typeof Pointer, Record<string, boolean>> = {\n  isDown: {},\n  justPressed: {},\n  justReleased: {},\n};\nconst GameState = {\n  currentScore: 0,\n  bestScore: 0,\n};\n\n// components\nconst Transform = { x: 0, y: 0, rad: 0, scaleX: 1, scaleY: 1 };\nconst Rect = { width: 10, height: 10 };\nconst Velocity = { x: 0, y: 0 };\nconst Acceleration = { x: 0, y: 0 };\nconst PlayerControl = {};\nconst Obstacle = { gapHeight: config.pipe.gapHeight };\n\n// systems\nfunction drawRect(\n  ctx: CanvasRenderingContext2D,\n  t: typeof Transform,\n  r: typeof Rect,\n  color = \"white\",\n) {\n  const s = Math.sin(t.rad);\n  const c = Math.cos(t.rad);\n  const oldF = ctx.fillStyle;\n  ctx.transform(c, s, -s, c, t.x, t.y);\n  ctx.fillStyle = color;\n  ctx.fillRect(\n    -r.width * 0.5,\n    -r.height * 0.5,\n    r.width * t.scaleX,\n    r.height * t.scaleY,\n  );\n  ctx.fillStyle = oldF;\n  ctx.transform(c, -s, s, c, c * -t.x + s * -t.y, -s * -t.x + c * -t.y);\n}\n\nfunction handleDrawing(world: World) {\n  if (!ctx) return;\n  drawBackground(ctx, \"green\");\n  world.query({ and: [Transform, Rect], not: [Obstacle] }).forEach((e) => {\n    const t = world.getComponent(e, Transform);\n    const r = world.getComponent(e, Rect);\n    drawRect(ctx, t, r);\n  });\n  world.query({ and: [Transform, Rect, Obstacle] }).forEach((e) => {\n    const t = world.getComponent(e, Transform);\n    const r = world.getComponent(e, Rect);\n    const o = world.getComponent(e, Obstacle);\n    const height = (r.height - o.gapHeight) * 0.5;\n    drawRect(\n      ctx,\n      {\n        x: t.x,\n        y: t.y + (o.gapHeight + height) * 0.5,\n        scaleX: 1,\n        scaleY: 1,\n        rad: 0,\n      },\n      {\n        width: r.width,\n        height,\n      },\n    );\n    drawRect(\n      ctx,\n      {\n        x: t.x,\n        y: t.y - (o.gapHeight + height) * 0.5,\n        scaleX: 1,\n        scaleY: 1,\n        rad: 0,\n      },\n      {\n        width: r.width,\n        height,\n      },\n    );\n  });\n\n  ctx.fillText(\n    \"Score: \" + GameState.currentScore + \"; Best: \" + GameState.bestScore,\n    0,\n    10,\n  );\n}\n\nfunction handleMovement(world: World) {\n  const dt = dtMilli / 1000;\n  world.query({ and: [Transform, Acceleration, Velocity] }).forEach((e) => {\n    const t = world.getComponent(e, Transform);\n    const v = world.getComponent(e, Velocity);\n    const a = world.getComponent(e, Acceleration);\n    v.x += a.x * dt;\n    v.x *= config.hSpeedMult;\n    v.y += a.y * dt;\n    t.x += v.x * dt;\n    t.y += v.y * dt;\n  });\n}\n\nfunction handleInput(world: World) {\n  world.query({ and: [PlayerControl, Acceleration, Velocity] }).forEach((e) => {\n    // movement control\n    const a = world.getComponent(e, Acceleration);\n    const v = world.getComponent(e, Velocity);\n    a.y = config.grav;\n    if (Keys.justPressed[\" \"] || Pointer.justPressed) {\n      a.y = -config.grav * 2e1;\n      v.x = v.y = 0;\n    }\n  });\n}\n\nfunction resetGame(world: World) {\n  GameState.bestScore = parseInt(localStorage.getItem(\"best\") || \"0\");\n\n  GameState.bestScore =\n    GameState.currentScore > GameState.bestScore\n      ? GameState.currentScore\n      : GameState.bestScore;\n  GameState.currentScore = 0;\n\n  localStorage.setItem(\"best\", GameState.bestScore.toString());\n\n  world.query({ and: [PlayerControl] }).forEach((e) => {\n    resetPlayer(e);\n  });\n  world.query({ and: [Obstacle] }).forEach((e) => {\n    const v = world.getComponent(e, Velocity);\n    v.x = -config.pipe.baseSpeed;\n    resetObstacle(e);\n  });\n}\n\nfunction handleCollision(world: World) {\n  world.query({ and: [PlayerControl, Rect, Transform] }).forEach((e) => {\n    const t = world.getComponent(e, Transform);\n    const r = world.getComponent(e, Rect);\n\n    if (t.y > canvas.height - r.height * 0.5) {\n      resetGame(world);\n    }\n\n    world.query({ and: [Transform, Rect, Obstacle] }).forEach((other) => {\n      const ot = world.getComponent(other, Transform);\n      const or = world.getComponent(other, Rect);\n      const oo = world.getComponent(other, Obstacle);\n\n      if (\n        (t.x - ot.x) ** 2 < ((r.width + or.width) * 0.5) ** 2 &&\n        (t.y - ot.y) ** 2 > ((oo.gapHeight - r.height) * 0.5) ** 2\n      ) {\n        resetGame(world);\n      }\n\n      // loop back\n      if (ot.x + or.width * 0.5 < 0) {\n        resetObstacle(other);\n        GameState.currentScore++;\n      }\n    });\n  });\n}\n\nfunction drawBackground(ctx: CanvasRenderingContext2D, color: string = \"\") {\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\n  const oldF = ctx.fillStyle;\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  ctx.fillStyle = oldF;\n}\n\n// entity\nfunction addRect(world: World, x = 0, y = 0, rad = 0, w = 10, h = 10): entityT {\n  const e = world.addEntity();\n  const t = world.addComponent(e, Transform);\n  t.x = x;\n  t.y = y;\n  t.rad = rad;\n  const r = world.addComponent(e, Rect);\n  r.width = w;\n  r.height = h;\n  world.addComponent(e, Velocity);\n  world.addComponent(e, Acceleration);\n  return e;\n}\n\nfunction addPlayer(world: World): entityT {\n  const player = addRect(world);\n  world.addComponent(player, PlayerControl);\n  return player;\n}\n\nfunction addObstacle(world: World): entityT {\n  const e = addRect(world);\n  const r = world.getComponent(e, Rect);\n  world.addComponent(e, Obstacle);\n  r.width = config.pipe.width;\n  r.height = config.pipe.height;\n  return e;\n}\n\nfunction resetPlayer(player: entityT) {\n  const t = game.getComponent(player, Transform);\n  const v = game.getComponent(player, Velocity);\n  const a = game.getComponent(player, Acceleration);\n  t.x = canvas.width * 0.15;\n  t.y = canvas.height * 0.5;\n  v.x = v.y = a.x = a.y = 0;\n}\n\nfunction resetObstacle(obstacle: entityT) {\n  const t = game.getComponent(obstacle, Transform);\n  const r = game.getComponent(obstacle, Rect);\n  const o = game.getComponent(obstacle, Obstacle);\n  const gapHeight = o.gapHeight;\n  t.y = Math.random() * (canvas.height - gapHeight) + gapHeight * 0.5;\n  t.x = canvas.width + r.width * 0.5;\n}\n\ndocument.onkeydown = (e) => {\n  !Keys.isDown[e.key] && (Keys.justPressed[e.key] = true);\n  Keys.isDown[e.key] = true;\n};\n\ndocument.onkeyup = (e) => {\n  Keys.isDown[e.key] = false;\n  Keys.justReleased[e.key] = true;\n};\n\nglobalThis.window.onresize = document.body.onload = () => {\n  if (innerWidth / innerHeight < canvas.width / canvas.height) {\n    canvas.style.width = \"100%\";\n    canvas.style.height = \"\";\n  } else {\n    canvas.style.width = \"\";\n    canvas.style.height = \"100%\";\n  }\n};\n\ndocument.onpointerdown = () => {\n  Pointer.isDown = true;\n  Pointer.justPressed = true;\n};\n\ndocument.onpointerup = () => {\n  Pointer.isDown = false;\n  Pointer.justReleased = true;\n};\n\n// initialization\nconst game = new World();\nlet dtMilli = 0;\nlet timeMilli = 0;\naddPlayer(game);\naddObstacle(game);\nresetGame(game);\n\n(function loop() {\n  requestAnimationFrame(loop);\n  game.update(handleDrawing, handleInput, handleCollision, handleMovement);\n  Pointer.justReleased = false;\n  Pointer.justPressed = false;\n  for (const key in Keys.justPressed) {\n    Keys.justPressed[key] = false;\n  }\n  for (const key in Keys.justReleased) {\n    Keys.justReleased[key] = false;\n  }\n  dtMilli = performance.now() - timeMilli;\n  timeMilli += dtMilli;\n})();\n"],
  "mappings": "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",
  "names": ["ObjectPoolMap", "objectFactory", "key", "index", "backKey", "temp", "ComponentManager", "component", "ObjectPoolMap", "mask", "entity", "entry", "src", "dest", "newEntity", "World", "ComponentManager", "entity", "newEntity", "src", "dest", "entry", "compId", "a", "component", "values", "cem", "fns", "i", "l", "query", "res", "q", "comp", "config_default", "canvas", "ctx", "Pointer", "Keys", "GameState", "Transform", "Rect", "Velocity", "Acceleration", "PlayerControl", "Obstacle", "config_default", "drawRect", "t", "r", "color", "c", "oldF", "handleDrawing", "world", "drawBackground", "o", "height", "handleMovement", "dt", "dtMilli", "e", "v", "a", "handleInput", "resetGame", "resetPlayer", "resetObstacle", "handleCollision", "other", "ot", "or", "oo", "addRect", "x", "y", "rad", "w", "h", "addPlayer", "player", "addObstacle", "game", "obstacle", "gapHeight", "World", "timeMilli", "loop", "key"]
}
