{
  "version": 3,
  "sources": ["../../../src/pool.ts", "../../../src/component.ts", "../../../src/entity.ts", "../../../src/world.ts", "../src/main.ts"],
  "sourcesContent": ["export class ObjectPoolMap<K, V> {\n  private storage: V[] = [];\n  private keyToIndex: Map<K, number> = new Map();\n  private indexToKey: K[] = [];\n  private objectFactory: () => V;\n\n  constructor(objectFactory: () => V) {\n    this.objectFactory = objectFactory;\n  }\n\n  size() {\n    return this.keyToIndex.size;\n  }\n\n  add(key: K): V {\n    if (this.keyToIndex.has(key))\n      return this.storage[this.keyToIndex.get(key) as number];\n    if (this.storage.length <= this.keyToIndex.size)\n      this.storage.push(this.objectFactory());\n    this.keyToIndex.set(key, this.keyToIndex.size);\n    this.indexToKey[this.keyToIndex.size - 1] = key;\n    return this.storage[this.keyToIndex.get(key) as number];\n  }\n\n  remove(key: K): void {\n    const index = this.keyToIndex.get(key);\n    if (index == undefined) return;\n    const backKey = this.indexToKey[this.keyToIndex.size - 1];\n    const temp = this.storage[index];\n    this.storage[index] = this.storage[this.keyToIndex.size - 1];\n    this.storage[this.keyToIndex.size - 1] = temp;\n    this.indexToKey[index] = backKey;\n    this.indexToKey.pop();\n    this.keyToIndex.set(backKey, index);\n    this.keyToIndex.delete(key);\n  }\n\n  get(key: K): V {\n    const index = this.keyToIndex.get(key);\n    if (index == undefined) throw new Error(\"Key not found.\");\n    return this.storage[index];\n  }\n\n  has(key: K): boolean {\n    return this.keyToIndex.has(key);\n  }\n\n  clean(): void {\n    this.storage.splice(this.keyToIndex.size);\n  }\n}\n", "import { ObjectPoolMap } from \"./pool.ts\";\nimport { entityT } from \"./entity.ts\";\n\nexport class ComponentManager {\n  private poolMap: Map<object, ObjectPoolMap<entityT, object>> = new Map();\n  private idMap: Map<object, number> = new Map();\n\n  register<T extends object>(component: T): void {\n    if (this.poolMap.has(component)) return;\n    this.idMap.set(component, this.idMap.size);\n    this.poolMap.set(\n      component,\n      new ObjectPoolMap<entityT, T>(() => ({ ...component })),\n    );\n  }\n\n  getId<T extends object>(component: T): number {\n    const mask = this.idMap.get(component);\n    if (mask != undefined) return mask;\n    this.register(component);\n    return this.idMap.get(component) as number;\n  }\n\n  add<T extends object>(entity: entityT, component: T): T {\n    return Object.assign(\n      (this.poolMap.get(component) as ObjectPoolMap<entityT, T>).add(entity),\n      component,\n    );\n  }\n\n  remove<T extends object>(entity: entityT, component: T): void {\n    (this.poolMap.get(component) as ObjectPoolMap<entityT, T>).remove(entity);\n  }\n\n  has<T extends object>(entity: entityT, component: T): boolean {\n    return (\n      this.poolMap.has(component) &&\n      (this.poolMap.get(component) as ObjectPoolMap<entityT, T>).has(entity)\n    );\n  }\n\n  get<T extends object>(entity: entityT, component: T): T {\n    return (this.poolMap.get(component) as ObjectPoolMap<entityT, T>).get(\n      entity,\n    );\n  }\n\n  size<T extends object>(component: T): number {\n    return (this.poolMap.get(component) as ObjectPoolMap<entityT, T>).size();\n  }\n\n  delete(entity: entityT): void {\n    for (const entry of this.poolMap.entries()) entry[1].remove(entity);\n  }\n\n  copy(src: entityT, dest: entityT): void {\n    for (const entry of this.poolMap.entries())\n      entry[1].has(src) && Object.assign(entry[1].add(dest), entry[1].get(src));\n  }\n\n  clean(): void {\n    for (const entry of this.poolMap.entries()) entry[1].clean();\n  }\n}\n", "export type entityT = number;\nexport function newEntity(): entityT {\n  return Math.random();\n}\n", "import { ComponentManager } from \"./component.ts\";\nimport { newEntity, type entityT } from \"./entity.ts\";\n\nexport type queryT = Record<\"and\" | \"not\", object[]>;\n\nexport type systemT = (world: World) => void;\n\nexport class World {\n  private compEntityMap: Map<number, Set<entityT>> = new Map();\n  private compManager = new ComponentManager();\n  private entitySet: Set<entityT> = new Set();\n\n  addEntity(entity: entityT = newEntity()): entityT {\n    this.entitySet.add(entity);\n    return entity;\n  }\n\n  copyEntity(src: entityT, dest: entityT = newEntity()): entityT {\n    this.compManager.copy(src, dest);\n    for (const entry of this.compEntityMap) {\n      if (!entry[1].has(src)) continue;\n      entry[1].add(dest);\n    }\n    this.entitySet.add(dest);\n    return dest;\n  }\n\n  private getCompEntityMap(compId: number): Set<entityT> {\n    const a = this.compEntityMap.get(compId) ?? new Set();\n    this.compEntityMap.set(compId, a);\n    return a;\n  }\n\n  deleteEntity(entity: entityT) {\n    this.compManager.delete(entity);\n    for (const entry of this.compEntityMap) {\n      entry[1].delete(entity);\n    }\n    this.entitySet.delete(entity);\n  }\n\n  registerComponent<T extends object>(component: T): World {\n    this.compManager.register(component);\n    return this;\n  }\n\n  hasComponent<T extends object>(entity: entityT, component: T): boolean {\n    return this.compManager.has(entity, component);\n  }\n\n  addComponent<T extends object>(\n    entity: entityT,\n    component: T,\n    values: Partial<T> = component,\n  ): T {\n    this.compManager.register(component);\n    const cem = this.getCompEntityMap(this.compManager.getId(component));\n    if (cem.has(entity))\n      return Object.assign(this.compManager.get(entity, component), values);\n    cem.add(entity);\n    return Object.assign(this.compManager.add(entity, component), values);\n  }\n\n  removeComponent<T extends object>(entity: entityT, component: T): void {\n    this.compManager.register(component);\n    const cem = this.getCompEntityMap(this.compManager.getId(component));\n    if (!cem.has(entity)) return;\n    cem.delete(entity);\n    this.compManager.remove(entity, component);\n  }\n\n  getComponent<T extends object>(entity: entityT, component: T): T {\n    return this.compManager.get(entity, component);\n  }\n\n  update(...fns: systemT[]) {\n    for (let i = 0, l = fns.length; i < l; i++) fns[i](this);\n  }\n\n  cleanObjectPools(): void {\n    this.compManager.clean();\n  }\n\n  query(query: Partial<queryT>): entityT[] {\n    let res: Set<entityT> = this.entitySet;\n    const q: queryT = { and: [], not: [] };\n    Object.assign(q, query);\n    for (const comp of q.and) {\n      res = res.intersection(\n        this.getCompEntityMap(this.compManager.getId(comp)),\n      );\n    }\n    for (const comp of q.not) {\n      res = res.difference(this.getCompEntityMap(this.compManager.getId(comp)));\n    }\n    return [...res];\n  }\n\n  entityCount(): number {\n    return this.entitySet.size;\n  }\n}\n", "import { World } from \"bozoecs\";\n\n// singletons\nconst Ctx2D = setUpCanvas2D();\nconst Time = setUpTime();\nconst Keys = setUpKeyboard();\nconst Pointer = setUpPointer();\nconst Game = {\n  startLength: 5,\n  snakeWidth: 10,\n  snakeColor: \"#F0D0D0\",\n  snakeSpeed: 40,\n  foodRadius: 15,\n  foodColor: \"#F0A0A0\",\n};\n\nfunction setUpCanvas2D(): {\n  canvas: HTMLCanvasElement;\n  ctx: CanvasRenderingContext2D;\n} {\n  const canvas =\n    document.querySelector(\"canvas\") ?? document.createElement(\"canvas\");\n  if (!canvas) throw new Error(\"Cannot create canvas element.\");\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new Error(\"Cannot initialize context 2d.\");\n\n  document.body.appendChild(canvas);\n\n  globalThis.onresize = globalThis.onload = () => {\n    if (innerWidth / innerHeight < canvas.width / canvas.height) {\n      canvas.style.width = \"100%\";\n      canvas.style.height = \"\";\n    } else {\n      canvas.style.width = \"\";\n      canvas.style.height = \"100%\";\n    }\n  };\n\n  return { canvas, ctx };\n}\nfunction setUpTime() {\n  return { dtMilli: 0, timeMilli: 0 };\n}\nfunction updateTime(time: { dtMilli: number; timeMilli: number }) {\n  time.dtMilli = performance.now() - time.timeMilli;\n  time.timeMilli += time.dtMilli;\n}\nfunction setUpKeyboard(): Record<\n  \"isDown\" | \"justPressed\" | \"justReleased\",\n  Record<string, boolean>\n> {\n  const keys: ReturnType<typeof setUpKeyboard> = {\n    isDown: {},\n    justPressed: {},\n    justReleased: {},\n  };\n\n  globalThis.onkeydown = (e) => {\n    !keys.isDown[e.key] && (keys.justPressed[e.key] = true);\n    keys.isDown[e.key] = true;\n  };\n  globalThis.onkeyup = (e) => {\n    keys.isDown[e.key] = false;\n    keys.justReleased[e.key] = true;\n  };\n\n  return keys;\n}\nfunction updateKeyboard(\n  keys: Record<\n    \"isDown\" | \"justPressed\" | \"justReleased\",\n    Record<string, boolean>\n  >,\n) {\n  for (const key in keys.justPressed) keys.justPressed[key] = false;\n  for (const key in keys.justReleased) keys.justReleased[key] = false;\n}\nfunction setUpPointer() {\n  const pointer = {\n    x: 0,\n    y: 0,\n    isDown: false,\n    justPressed: false,\n    justReleased: false,\n    pressPos: { x: 0, y: 0 },\n    releasePos: { x: 0, y: 0 },\n  };\n\n  globalThis.onpointerdown = (e) => {\n    if (!(e.target instanceof HTMLCanvasElement)) return;\n    ((pointer.x = e.x), (pointer.y = e.y));\n    Object.assign(pointer.pressPos, pointer);\n    pointer.isDown = pointer.justPressed = true;\n  };\n\n  globalThis.onpointerup = (e) => {\n    ((pointer.x = e.x), (pointer.y = e.y));\n    Object.assign(pointer.releasePos, pointer);\n    ((pointer.isDown = false), (pointer.justReleased = true));\n  };\n\n  globalThis.onpointermove = (e) => {\n    ((pointer.x = e.x), (pointer.y = e.y));\n  };\n\n  return pointer;\n}\nfunction updatePointer(\n  pointer: Record<\"isDown\" | \"justPressed\" | \"justReleased\", boolean>,\n) {\n  pointer.justPressed = false;\n  pointer.justReleased = false;\n}\n\n// components\nconst Transform = { x: 0, y: 0, rad: 0 };\nconst Velocity = { x: 0, y: 0 };\nconst Hierarchy = { parent: -1, child: -1 };\nconst PlayerControl = {};\nconst isFood = {};\n\n// systems\nfunction handleMovement(world: World) {\n  world.query({ and: [Transform, Velocity] }).forEach((e) => {\n    const t = world.getComponent(e, Transform);\n    const v = world.getComponent(e, Velocity);\n    t.x += (v.x * Time.dtMilli) / 1000;\n    t.y += (v.y * Time.dtMilli) / 1000;\n    if (v.x == 0 && v.y == 0) return;\n    t.rad = Math.atan2(v.y, v.x);\n  });\n}\nfunction handleDrawing(world: World) {\n  Ctx2D.ctx.fillStyle = \"#202020\";\n  Ctx2D.ctx.fillRect(0, 0, Ctx2D.canvas.width, Ctx2D.canvas.height);\n  Ctx2D.ctx.fillStyle = Game.foodColor;\n  Ctx2D.ctx.beginPath();\n  world.query({ and: [Transform, isFood] }).forEach((e) => {\n    const p = world.getComponent(e, Transform);\n    Ctx2D.ctx.ellipse(\n      p.x,\n      p.y,\n      Game.foodRadius,\n      Game.foodRadius,\n      0,\n      0,\n      Math.PI * 2,\n    );\n  });\n  Ctx2D.ctx.fill();\n  Ctx2D.ctx.beginPath();\n  world.query({ and: [Transform, Hierarchy] }).forEach((e) => {\n    const h = world.getComponent(e, Hierarchy);\n    const p = world.getComponent(e, Transform);\n    Ctx2D.ctx.moveTo(p.x, p.y);\n    if (h.child != -1 && world.hasComponent(h.child, Transform)) {\n      const childTransform = world.getComponent(h.child, Transform);\n      Ctx2D.ctx.lineTo(childTransform.x, childTransform.y);\n    }\n  });\n  Ctx2D.ctx.strokeStyle = Game.snakeColor;\n  Ctx2D.ctx.lineCap = \"round\";\n  Ctx2D.ctx.lineWidth = Game.snakeWidth;\n  Ctx2D.ctx.lineJoin = \"round\";\n  Ctx2D.ctx.stroke();\n\n  const tail = world.query({ and: [Hierarchy] }).find((e) => {\n    return world.getComponent(e, Hierarchy).child == -1;\n  });\n  if (tail) {\n    const tailTransform = world.getComponent(tail, Transform);\n    const c = Math.cos(tailTransform.rad);\n    const s = Math.sin(tailTransform.rad);\n    Ctx2D.ctx.beginPath();\n    let x = 0;\n    let y = -Game.snakeWidth / 2;\n    Ctx2D.ctx.moveTo(\n      c * x - s * y + tailTransform.x,\n      s * x + c * y + tailTransform.y,\n    );\n    x = 0;\n    y = +Game.snakeWidth / 2;\n    Ctx2D.ctx.lineTo(\n      c * x - s * y + tailTransform.x,\n      s * x + c * y + tailTransform.y,\n    );\n    x = -Game.snakeWidth * 2;\n    y = 0;\n    Ctx2D.ctx.lineTo(\n      c * x - s * y + tailTransform.x,\n      s * x + c * y + tailTransform.y,\n    );\n    Ctx2D.ctx.fillStyle = Game.snakeColor;\n    Ctx2D.ctx.fill();\n  }\n\n  const head = world.query({ and: [Hierarchy] }).find((e) => {\n    return world.getComponent(e, Hierarchy).parent == -1;\n  });\n  if (head) {\n    Ctx2D.ctx.fillStyle = \"white\";\n    const headTransform = world.getComponent(head, Transform);\n    const c = Math.cos(headTransform.rad);\n    const s = Math.sin(headTransform.rad);\n    const offset = 5;\n    const eyeRadius = 4;\n    const pupilRadius = 2;\n    Ctx2D.ctx.beginPath();\n    let x = 0;\n    let y = -offset;\n    const leftEyeX = c * x - s * y + headTransform.x;\n    const leftEyeY = s * x + c * y + headTransform.y;\n    Ctx2D.ctx.ellipse(\n      leftEyeX,\n      leftEyeY,\n      eyeRadius,\n      eyeRadius,\n      headTransform.rad,\n      0,\n      Math.PI * 2,\n    );\n    x = 0;\n    y = offset;\n    const rightEyeX = c * x - s * y + headTransform.x;\n    const rightEyeY = s * x + c * y + headTransform.y;\n    Ctx2D.ctx.ellipse(\n      rightEyeX,\n      rightEyeY,\n      eyeRadius,\n      eyeRadius,\n      headTransform.rad,\n      0,\n      Math.PI * 2,\n    );\n    Ctx2D.ctx.fill();\n    Ctx2D.ctx.fillStyle = \"black\";\n    Ctx2D.ctx.beginPath();\n    let leftPupilX = leftEyeX;\n    let leftPupilY = leftEyeY;\n    const food = world.query({ and: [isFood, Transform] })[0];\n    if (food) {\n      const foodTransform = world.getComponent(food, Transform);\n      let dirX = foodTransform.x - leftPupilX;\n      let dirY = foodTransform.y - leftPupilY;\n      const mag = (dirX ** 2 + dirY ** 2) ** 0.5;\n      ((dirX /= mag), (dirY /= mag));\n      const eyePupilDiff = eyeRadius - pupilRadius;\n      leftPupilX += dirX * eyePupilDiff;\n      leftPupilY += dirY * eyePupilDiff;\n    }\n    Ctx2D.ctx.ellipse(\n      leftPupilX,\n      leftPupilY,\n      pupilRadius,\n      pupilRadius,\n      headTransform.rad,\n      0,\n      Math.PI * 2,\n    );\n    let rightPupilX = rightEyeX;\n    let rightPupilY = rightEyeY;\n    if (food) {\n      const foodTransform = world.getComponent(food, Transform);\n      let dirX = foodTransform.x - rightPupilX;\n      let dirY = foodTransform.y - rightPupilY;\n      const mag = (dirX ** 2 + dirY ** 2) ** 0.5;\n      ((dirX /= mag), (dirY /= mag));\n      const eyePupilDiff = eyeRadius - pupilRadius;\n      rightPupilX += dirX * eyePupilDiff;\n      rightPupilY += dirY * eyePupilDiff;\n    }\n    Ctx2D.ctx.ellipse(\n      rightPupilX,\n      rightPupilY,\n      pupilRadius,\n      pupilRadius,\n      headTransform.rad,\n      0,\n      Math.PI * 2,\n    );\n    Ctx2D.ctx.fill();\n  }\n\n  Ctx2D.ctx.fillStyle = \"white\";\n  Ctx2D.ctx.fillText(\n    `Score: ${world.query({ and: [Hierarchy] }).length - Game.startLength}; Best: ${localStorage.getItem(\"snake_best\") ?? 0}`,\n    0,\n    10,\n  );\n}\nfunction handleInput(world: World) {\n  world.query({ and: [PlayerControl, Velocity] }).forEach((e) => {\n    const v = world.getComponent(e, Velocity);\n    let angularVel = 0;\n    if (\n      Keys.isDown[\"a\"] ||\n      Keys.isDown[\"ArrowLeft\"] ||\n      (Pointer.isDown && Pointer.x < innerWidth / 2)\n    ) {\n      angularVel -= Math.PI;\n    }\n    if (\n      Keys.isDown[\"d\"] ||\n      Keys.isDown[\"ArrowRight\"] ||\n      (Pointer.isDown && Pointer.x > innerWidth / 2)\n    ) {\n      angularVel += Math.PI;\n    }\n    angularVel *= Time.dtMilli / 1000;\n    const c = Math.cos(angularVel);\n    const s = Math.sin(angularVel);\n    const x = v.x,\n      y = v.y;\n    v.x = c * x - s * y;\n    v.y = s * x + c * y;\n  });\n}\nfunction handleReset(world: World) {\n  let player = -1;\n  world.query({ and: [PlayerControl] }).forEach((e) => (player = e));\n  if (player == -1) {\n    player = world.addEntity();\n    world.addComponent(player, Transform, {\n      x: Ctx2D.canvas.width / 2,\n      y: Ctx2D.canvas.height / 2,\n    });\n    world.addComponent(player, Velocity, { x: Game.snakeSpeed });\n    world.addComponent(player, PlayerControl);\n    world.addComponent(player, Hierarchy);\n  }\n  const t = world.getComponent(player, Transform);\n  const collidedBody = world\n    .query({ and: [Hierarchy, Transform] })\n    .find((other) => {\n      const otherH = world.getComponent(other, Hierarchy);\n      if (player == otherH.parent || player == other) return false;\n      const otherT = world.getComponent(other, Transform);\n      return (\n        (otherT.x - t.x) ** 2 + (otherT.y - t.y) ** 2 < Game.snakeWidth ** 2\n      );\n    });\n  if (\n    t.x > Ctx2D.canvas.width ||\n    t.x < 0 ||\n    t.y > Ctx2D.canvas.height ||\n    t.y < 0 ||\n    world.entityCount() < Game.startLength ||\n    collidedBody != undefined\n  ) {\n    const score = world.query({ and: [Hierarchy] }).length - Game.startLength;\n    if (score > Number.parseInt(localStorage.getItem(\"snake_best\") ?? \"0\")) {\n      localStorage.setItem(\"snake_best\", score.toString());\n    }\n    t.x = Ctx2D.canvas.width / 2;\n    t.y = Ctx2D.canvas.height / 2;\n    const v = world.getComponent(player, Velocity);\n    ((v.x = Game.snakeSpeed), (v.y = 0));\n    world.query({ not: [PlayerControl] }).forEach((e) => world.deleteEntity(e));\n    let parent = player;\n    for (let i = 0, l = Game.startLength - 1; i < l; i++) {\n      const bodyPart = world.addEntity();\n      world.addComponent(bodyPart, Velocity);\n      world.addComponent(bodyPart, Hierarchy, { parent });\n      const parentTransform = world.getComponent(parent, Transform);\n      world.addComponent(bodyPart, Transform, {\n        x: parentTransform.x - Game.snakeWidth,\n        y: parentTransform.y,\n      });\n      world.getComponent(parent, Hierarchy).child = bodyPart;\n      parent = bodyPart;\n    }\n  }\n}\nfunction handleSpawnFood(world: World) {\n  if (world.query({ and: [isFood] }).length > 0) return;\n  // spawn food\n  const foodEntity = world.addEntity();\n  world.addComponent(foodEntity, isFood);\n  world.addComponent(foodEntity, Transform, {\n    x: Math.random() * Ctx2D.canvas.width,\n    y: Math.random() * Ctx2D.canvas.height,\n  });\n}\nfunction handleEatFood(world: World) {\n  world.query({ and: [PlayerControl, Transform] }).forEach((e) => {\n    const playerTransform = world.getComponent(e, Transform);\n    world.query({ and: [isFood, Transform] }).forEach((foodE) => {\n      const foodTransform = world.getComponent(foodE, Transform);\n      if (\n        (foodTransform.x - playerTransform.x) ** 2 +\n          (foodTransform.y - playerTransform.y) ** 2 >\n        (Game.snakeWidth / 2 + Game.foodRadius) ** 2\n      )\n        return;\n      world.deleteEntity(foodE);\n      const parent = world\n        .query({ and: [Hierarchy] })\n        .find((e) => world.getComponent(e, Hierarchy).child == -1);\n      if (\n        !parent ||\n        !world.hasComponent(parent, Transform) ||\n        !world.hasComponent(parent, Hierarchy)\n      )\n        return;\n      // spawn new body part\n      const bodyPart = world.addEntity();\n      world.addComponent(bodyPart, Velocity);\n      world.addComponent(bodyPart, Hierarchy, { parent });\n      world.addComponent(\n        bodyPart,\n        Transform,\n        world.getComponent(parent, Transform),\n      );\n      world.getComponent(parent, Hierarchy).child = bodyPart;\n    });\n  });\n}\nfunction handleEntityHierarchy(world: World) {\n  world.query({ and: [Hierarchy, Transform, Velocity] }).forEach((e) => {\n    const h = world.getComponent(e, Hierarchy);\n    const p = world.getComponent(e, Transform);\n    const v = world.getComponent(e, Velocity);\n    if (\n      h.parent != -1 &&\n      world.hasComponent(h.parent, Transform) &&\n      world.hasComponent(h.parent, Velocity)\n    ) {\n      const parentTransform = world.getComponent(h.parent, Transform);\n      if ((p.x - parentTransform.x) ** 2 + (p.y - parentTransform.y) ** 2 < 50)\n        return;\n      const parentVelocity = world.getComponent(h.parent, Velocity);\n      const velocityMag =\n        (parentVelocity.x ** 2 + parentVelocity.y ** 2) ** 0.5;\n      const dx = parentTransform.x - p.x;\n      const dy = parentTransform.y - p.y;\n      const distance = (dx ** 2 + dy ** 2) ** 0.5;\n      v.x = (dx / distance) * velocityMag;\n      v.y = (dy / distance) * velocityMag;\n    }\n  });\n}\n\n// initialization\nconst game = new World();\n\n// loop\n{\n  (function update() {\n    requestAnimationFrame(update);\n    game.update(\n      handleDrawing,\n      handleReset,\n      handleSpawnFood,\n      handleEatFood,\n      handleInput,\n      handleEntityHierarchy,\n      handleMovement,\n    );\n    updateTime(Time);\n    updateKeyboard(Keys);\n    updatePointer(Pointer);\n  })();\n}\n"],
  "mappings": "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",
  "names": ["ObjectPoolMap", "objectFactory", "key", "index", "backKey", "temp", "ComponentManager", "component", "ObjectPoolMap", "mask", "entity", "entry", "src", "dest", "newEntity", "World", "ComponentManager", "entity", "newEntity", "src", "dest", "entry", "compId", "a", "component", "values", "cem", "fns", "i", "l", "query", "res", "q", "comp", "Ctx2D", "setUpCanvas2D", "Time", "setUpTime", "Keys", "setUpKeyboard", "Pointer", "setUpPointer", "Game", "canvas", "ctx", "updateTime", "time", "keys", "updateKeyboard", "key", "pointer", "updatePointer", "Transform", "Velocity", "Hierarchy", "PlayerControl", "isFood", "handleMovement", "world", "t", "v", "handleDrawing", "e", "p", "h", "childTransform", "tail", "tailTransform", "c", "s", "x", "y", "head", "headTransform", "offset", "eyeRadius", "pupilRadius", "leftEyeX", "leftEyeY", "rightEyeX", "rightEyeY", "leftPupilX", "leftPupilY", "food", "foodTransform", "dirX", "dirY", "mag", "eyePupilDiff", "rightPupilX", "rightPupilY", "handleInput", "angularVel", "handleReset", "player", "collidedBody", "other", "otherH", "otherT", "score", "parent", "i", "l", "bodyPart", "parentTransform", "handleSpawnFood", "foodEntity", "handleEatFood", "playerTransform", "foodE", "handleEntityHierarchy", "parentVelocity", "velocityMag", "dx", "dy", "distance", "game", "World", "update"]
}
