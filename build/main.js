var bozoecs=(()=>{var p=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var M=Object.prototype.hasOwnProperty;var k=(t,e)=>{for(var n in e)p(t,n,{get:e[n],enumerable:!0})},v=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of C(e))!M.call(t,i)&&i!==n&&p(t,i,{get:()=>e[i],enumerable:!(r=h(e,i))||r.enumerable});return t};var y=t=>v(p({},"__esModule",{value:!0}),t);var I={};k(I,{addComponent:()=>x,component:()=>u,entity:()=>s,filter:()=>g,getComponent:()=>a,getEntityPointer:()=>m,removeComponent:()=>c,removeEntity:()=>l,systemGroup:()=>d,world:()=>f});function f(...t){let e={components:{},indexMap:new Map,nextIdx:0};for(let n=0;n<t.length;++n)e.components[t[n].id]=[];return(...n)=>(e.filters=n,e)}function s(){return parseInt(Math.random()*2**64)}function l(t,e){let n=0;for(let r=0;r<t.components.length;r++)t.components[r]&&t.components[r][e]&&(n+=r);for(let r=0;r<t.filters.length;r++)t.filters[r].mask&n&&t.filters[r].results.delete(e)}function m(t,e){return t.indexMap.get(e)}var E=function*(){let t=1;for(;;)yield t,t<<=1}();function u(t){return{id:E.next().value,properties:t}}function x(t,e,n){let r=t.indexMap.get(e)??(()=>{let o=t.nextIdx++;return t.indexMap.set(e,o),o})(),i=t.components[n.id][r]??={};for(let o in n.properties)i[o]=n.properties[o];for(let o=0;o<t.filters.length;o++)t.filters[o].mask&n.id&&t.filters[o].results.add(e);return i}function c(t,e,n){for(let r=0;r<t.filters.length;r++)t.filters[r].mask&n.id&&t.filters[r].results.delete(e)}function a(t,e,n){return t.components[n.id][e]}function d(t){return(...e)=>(...n)=>{for(let r=0;r<e.length;++r)e[r](t.results,...n)}}function g(...t){let e=0;for(let n=0;n<t.length;n++)e+=t[n].id;return{mask:e,results:new Set}}return y(I);})();
