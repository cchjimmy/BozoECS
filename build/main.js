var bozoecs=(()=>{var f=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var C=(t,e)=>{for(var r in e)f(t,r,{get:e[r],enumerable:!0})},M=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of k(e))!y.call(t,o)&&o!==r&&f(t,o,{get:()=>e[o],enumerable:!(n=h(e,o))||n.enumerable});return t};var v=t=>M(f({},"__esModule",{value:!0}),t);var I={};C(I,{addComponent:()=>a,component:()=>u,entity:()=>s,filter:()=>g,getComponent:()=>x,getEntityPointer:()=>m,removeComponent:()=>c,removeEntity:()=>l,systemGroup:()=>d,world:()=>p});function p(...t){let e={components:{},indexMap:new Map,nextIdx:0};for(let r=0;r<t.length;++r)e.components[t[r].id]=[];return(...r)=>{e.filters=new Array(r.length);for(let n=0;n<r.length;++n)e.filters[n]={mask:r[n],results:new Set};return e}}function s(){return parseInt(Math.random()*2**64)}function l(t,e){let r=0;for(let n=0;n<t.components.length;n++)t.components[n]&&t.components[n][e]&&(r+=n);for(let n=0;n<t.filters.length;n++)t.filters[n].mask&r&&t.filters[n].results.delete(e)}function m(t,e){return t.indexMap.get(e)}var E=function*(){let t=1;for(;;)yield t,t<<=1}();function u(t){return{id:E.next().value,properties:t}}function a(t,e,r){let n=t.indexMap.get(e)??(()=>{let i=t.nextIdx++;return t.indexMap.set(e,i),i})(),o=t.components[r.id][n]??={};for(let i in r.properties)o[i]=r.properties[i];for(let i=0;i<t.filters.length;i++)t.filters[i].mask&r.id&&t.filters[i].results.add(e);return o}function c(t,e,r){for(let n=0;n<t.filters.length;n++)t.filters[n].mask&r.id&&t.filters[n].results.delete(e)}function x(t,e,r){return t.components[r.id][e]}function d(t,e){let r;for(let n=0;n<e.filters.length;++n)e.filters[n].mask===t&&(r=e.filters[n].results);return(...n)=>(...o)=>{for(let i=0;i<n.length;++i)n[i](r,e,...o)}}function g(...t){let e=0;for(let r=0;r<t.length;r++)e+=t[r].id;return e}return v(I);})();
