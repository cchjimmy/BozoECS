var bozoecs=(()=>{var f=Object.defineProperty;var s=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var p=(e,t)=>{for(var n in t)f(e,n,{get:t[n],enumerable:!0})},m=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of l(t))!u.call(e,o)&&o!==n&&f(e,o,{get:()=>t[o],enumerable:!(r=s(t,o))||r.enumerable});return e};var c=e=>m(f({},"__esModule",{value:!0}),e);var G={};p(G,{addComponent:()=>C,component:()=>v,entity:()=>x,filter:()=>d,getComponent:()=>E,getEntityPointer:()=>h,getResults:()=>k,removeComponent:()=>y,removeEntity:()=>g,systemGroup:()=>M,world:()=>a});function a(...e){return(...t)=>{let n={components:{},indexMap:new Map,nextIdx:0,filters:new Array(t.length)};for(let r=0;r<e.length;++r)n.components[e[r].id]=[];for(let r=0;r<t.length;++r)n.filters[r]={mask:t[r],results:new Set};return n}}function x(){return parseInt(Math.random()*2**64)}function g(e,t){let n=0;for(let r=0;r<e.components.length;r++)e.components[r]&&e.components[r][t]&&(n+=r);for(let r=0;r<e.filters.length;r++)e.filters[r].mask&n&&e.filters[r].results.delete(t)}function h(e,t){return e.indexMap.get(t)}function d(...e){let t=0;for(let n=0;n<e.length;n++)t+=e[n].id;return t}function k(e,t){for(let n=0;n<e.filters.length;++n)if(e.filters[n].mask==t)return e.filters[n].results}function M(...e){return(...t)=>{for(let n=0;n<e.length;++n)e[n](...t)}}var I=function*(){let e=1;for(;;)yield e,e<<=1}();function v(e){return{id:I.next().value,properties:e}}function C(e,t,n){let r=e.indexMap.get(t)??(()=>{let i=e.nextIdx++;return e.indexMap.set(t,i),i})(),o=e.components[n.id][r]??={};for(let i in n.properties)o[i]=n.properties[i];for(let i=0;i<e.filters.length;i++)e.filters[i].mask&n.id&&e.filters[i].results.add(t);return o}function y(e,t,n){for(let r=0;r<e.filters.length;r++)e.filters[r].mask&n.id&&e.filters[r].results.delete(t)}function E(e,t,n){return e.components[n.id][t]}return c(G);})();
