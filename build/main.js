var bozoecs=(()=>{var f=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var C=(t,n)=>{for(var r in n)f(t,r,{get:n[r],enumerable:!0})},M=(t,n,r,e)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of k(n))!y.call(t,o)&&o!==r&&f(t,o,{get:()=>n[o],enumerable:!(e=h(n,o))||e.enumerable});return t};var v=t=>M(f({},"__esModule",{value:!0}),t);var I={};C(I,{addComponent:()=>a,component:()=>u,entity:()=>s,filter:()=>g,getComponent:()=>x,getEntityPointer:()=>m,removeComponent:()=>c,removeEntity:()=>l,systemGroup:()=>d,world:()=>p});function p(...t){return(...n)=>{let r={components:{},indexMap:new Map,nextIdx:0,filters:new Array(n.length)};for(let e=0;e<t.length;++e)r.components[t[e].id]=[];for(let e=0;e<n.length;++e)r.filters[e]={mask:n[e],results:new Set};return r}}function s(){return parseInt(Math.random()*2**64)}function l(t,n){let r=0;for(let e=0;e<t.components.length;e++)t.components[e]&&t.components[e][n]&&(r+=e);for(let e=0;e<t.filters.length;e++)t.filters[e].mask&r&&t.filters[e].results.delete(n)}function m(t,n){return t.indexMap.get(n)}var E=function*(){let t=1;for(;;)yield t,t<<=1}();function u(t){return{id:E.next().value,properties:t}}function a(t,n,r){let e=t.indexMap.get(n)??(()=>{let i=t.nextIdx++;return t.indexMap.set(n,i),i})(),o=t.components[r.id][e]??={};for(let i in r.properties)o[i]=r.properties[i];for(let i=0;i<t.filters.length;i++)t.filters[i].mask&r.id&&t.filters[i].results.add(n);return o}function c(t,n,r){for(let e=0;e<t.filters.length;e++)t.filters[e].mask&r.id&&t.filters[e].results.delete(n)}function x(t,n,r){return t.components[r.id][n]}function d(t,n){let r;for(let e=0;e<n.filters.length;++e)n.filters[e].mask===t&&(r=n.filters[e].results);return(...e)=>(...o)=>{for(let i=0;i<e.length;++i)e[i](r,n,...o)}}function g(...t){let n=0;for(let r=0;r<t.length;r++)n+=t[r].id;return n}return v(I);})();
