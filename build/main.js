var bozoecs=(()=>{var s=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var M=(t,e)=>{for(var n in e)s(t,n,{get:e[n],enumerable:!0})},k=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of y(e))!C.call(t,o)&&o!==n&&s(t,o,{get:()=>e[o],enumerable:!(r=h(e,o))||r.enumerable});return t};var v=t=>k(s({},"__esModule",{value:!0}),t);var I={};M(I,{addComponent:()=>x,component:()=>u,entity:()=>f,filter:()=>g,getComponent:()=>a,getEntityPointer:()=>m,removeComponent:()=>c,removeEntity:()=>l,system:()=>d,world:()=>p});function p(...t){return(...e)=>{let n={components:{},filters:e,indexMap:new Map,nextIdx:0};for(let r=0;r<t.length;r++)n.components[t[r].id]=[];return n}}function f(){return parseInt(Math.random()*2**64)}function l(t,e){let n=0;for(let r=0;r<t.components.length;r++)t.components[r]&&t.components[r][e]&&(n+=r);for(let r=0;r<t.filters.length;r++)t.filters[r].mask&n&&t.filters[r].results.delete(e)}function m(t,e){return t.indexMap.get(e)}var E=function*(){let t=1;for(;;)yield t,t<<=1}();function u(t){return{id:E.next().value,properties:t}}function x(t,e,n){let r=t.indexMap.get(e)??(()=>{let i=t.nextIdx++;return t.indexMap.set(e,i),i})(),o=t.components[n.id][r]??={};for(let i in n.properties)o[i]=n.properties[i];for(let i=0;i<t.filters.length;i++)t.filters[i].mask&n.id&&t.filters[i].results.add(e);return o}function c(t,e,n){for(let r=0;r<t.filters.length;r++)t.filters[r].mask&n.id&&t.filters[r].results.delete(e)}function a(t,e,n){return t.components[n.id][e]}function d(t){let e=t.results;return(...n)=>(...r)=>{let o=[e,...r];for(let i=0;i<n.length;i++)o=n[i](...o)}}function g(...t){let e=0;for(let n=0;n<t.length;n++)e+=t[n].id;return{mask:e,results:new Set}}return v(I);})();
